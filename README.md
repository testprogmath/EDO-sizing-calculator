# Калькулятор Efros NAC - Расчет инфраструктуры

Веб-приложение для расчета инфраструктурных требований системы сетевого контроля доступа (NAC) Efros Defence Operations.

## Описание

Калькулятор позволяет оценить необходимые вычислительные ресурсы для развертывания системы NAC в зависимости от:
- Количества устройств в сети (1,000 - 20,000)
- Метода аутентификации (MAB, PEAP, EAP-TLS)
- Дополнительных функций (RADIUS Accounting, OCSP, MAC-спуфинг защита)
- Конфигурации кластера (1-9 узлов)

## Структура проекта

```
calculator/
├── index.html              # Главная страница приложения
├── css/
│   └── main.css            # Основные стили (804 строки)
├── js/
│   ├── app.js              # Функции интерфейса (preset, toggle, copy)
│   ├── hybrid.js           # Основная логика калькулятора
│   ├── calculator.js       # Расчеты и функции экспорта
│   └── coefficients.js     # Коэффициенты для вычислений
├── images/
│   └── efros-logo.svg      # Логотип компании
└── mockup*.html            # Архивные макеты интерфейса
```

## Функционал

### Основные возможности

- **Preset-конфигурации**: Быстрый выбор для малого офиса, среднего бизнеса или корпорации
- **Методы аутентификации**:
  - **MAB** (MAC Address Bypass) - базовая аутентификация по MAC-адресу
  - **PEAP** (Protected EAP) - защищенная аутентификация с MS-CHAPv2
  - **EAP-TLS** - аутентификация с цифровыми сертификатами

### Дополнительные опции

- **RADIUS Accounting** - учет сетевой активности (+23% к нагрузке)
- **OCSP проверка** - валидация сертификатов для EAP-TLS (+14% к нагрузке)
- **MAC-спуфинг защита** - защита от подмены MAC-адресов для MAB (+27% к нагрузке)
- **API Gateway** - всегда включен с 10% накладными расходами

### Расширенные настройки

- Процент одновременных подключений (5-100%)
- Окно всплеска нагрузки (10-300 сек)
- Запас производительности (0-100%)

## Результаты расчетов

Калькулятор выдает две группы показателей:

### Бизнес-показатели
- Количество серверов (комплекс + СУБД)
- Требования к CPU, памяти и дискам для каждого сервера

### Технические показатели
- Конфигурация Kubernetes кластера
- Количество подов и их ресурсные лимиты
- Целевые значения RPS (запросов в секунду)

## Экспорт результатов

- **PDF** - подробный отчет с логотипом и таблицами
- **CSV** - данные для дальнейшего анализа
- **Копирование** - текстовый формат в буфер обмена

## Технические детали

### Алгоритм расчетов

1. **Базовые RPS** - рассчитываются на основе количества устройств и метода аутентификации
2. **Пиковая нагрузка** - учитывает процент одновременных подключений и окно всплеска
3. **Накладные расходы** - добавляются коэффициенты для дополнительных функций
4. **Ресурсы подов** - определяются исходя из целевых RPS с запасом производительности
5. **Масштабирование кластера** - автоматический выбор количества узлов для больших нагрузок

### Коэффициенты нагрузки

```javascript
const authMethodCoefficients = {
    'MAB': 1.0,           // Базовый коэффициент
    'PEAP': 1.8,          // +80% к нагрузке
    'EAP-TLS': 2.2        // +120% к нагрузке
};

const additionalLoad = {
    accounting: 1.23,     // +23%
    ocsp: 1.14,          // +14%
    spoofing: 1.27,      // +27%
    gateway: 1.10        // +10% (всегда)
};
```

### Зависимости между опциями

- **MAC-спуфинг защита** автоматически включает RADIUS Accounting
- **OCSP проверка** доступна только для метода EAP-TLS
- **MAC-спуфинг защита** доступна только для метода MAB

## Автоматическое масштабирование

При превышении 20,000 устройств и выборе менее 5 узлов система автоматически рекомендует увеличить количество узлов до 5 для обеспечения стабильной работы.

## Браузерная поддержка

Приложение поддерживает современные браузеры:
- Chrome/Edge 90+
- Firefox 88+
- Safari 14+

Использует современные Web APIs:
- Clipboard API для копирования результатов
- CSS Grid и Flexbox для адаптивной верстки
- ES6+ JavaScript функции

## Разработка

Для локальной разработки просто откройте `index.html` в браузере. Приложение не требует сборки или сервера - работает как статическая веб-страница.

### Структура кода

- **index.html** - чистый HTML с семантической разметкой
- **css/main.css** - стили с CSS-переменными и адаптивным дизайном
- **js/app.js** - функции UI: presets, toggle, модальные окна
- **js/hybrid.js** - основная бизнес-логика и обработка событий
- **js/calculator.js** - математические расчеты и экспорт данных
- **js/coefficients.js** - константы и коэффициенты для расчетов

### Принципы архитектуры

- Разделение ответственности между модулями
- Отсутствие встроенных стилей и скриптов
- Использование семантической разметки
- Прогрессивные улучшения интерфейса